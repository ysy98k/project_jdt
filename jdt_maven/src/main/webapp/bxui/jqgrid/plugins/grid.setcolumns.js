!function(a){a.jgrid.extend({setColumns:function(b){return b=a.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:!1,drag:!0,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:!0,ShrinkToFit:!1,jqModal:!1,saveicon:[!0,"left","ui-icon-disk"],closeicon:[!0,"left","ui-icon-close"],onClose:null,colnameview:!0,closeAfterSubmit:!0,updateAfterCheck:!1,recreateForm:!1},a.jgrid.col,b||{}),this.each(function(){var c=this;if(c.grid){var d="function"==typeof b.beforeShowForm?!0:!1,e="function"==typeof b.afterShowForm?!0:!1,f="function"==typeof b.afterSubmitForm?!0:!1,g=c.p.id,h="ColTbl_"+g,j={themodal:"colmod"+g,modalhead:"colhd"+g,modalcontent:"colcnt"+g,scrollelm:h};if(b.recreateForm===!0&&null!=a("#"+j.themodal).html()&&a("#"+j.themodal).remove(),null!=a("#"+j.themodal).html())d&&b.beforeShowForm(a("#"+h)),a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+g,jqm:b.jqModal,jqM:!1,modal:b.modal}),e&&b.afterShowForm(a("#"+h));else{var k=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",l="<div id='"+h+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+k+";'>";for(l+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>",i=0;i<this.p.colNames.length;i++)c.p.colModel[i].hidedlg||(l+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(this.p.colModel[i].hidden===!1?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(b.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>");l+="</tbody></table></div>";var m=b.updateAfterCheck?"":"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>",n="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>";l+="<table border='0' class='EditTable' id='"+h+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+m+"&#160;"+n+"</td></tr></tbody></table>",b.gbox="#gbox_"+g,a.jgrid.createModal(j,l,b,"#gview_"+c.p.id,a("#gview_"+c.p.id)[0]),1==b.saveicon[0]&&a("#dData","#"+h+"_2").addClass("right"==b.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>"),1==b.closeicon[0]&&a("#eData","#"+h+"_2").addClass("right"==b.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>"),b.updateAfterCheck?a(":input","#"+h).click(function(d){var e=this.id.substr(4);return e&&(this.checked?a(c).jqGrid("showCol",e):a(c).jqGrid("hideCol",e),b.ShrinkToFit===!0&&a(c).jqGrid("setGridWidth",c.grid.width-.001,!0)),this}):a("#dData","#"+h+"_2").click(function(d){for(i=0;i<c.p.colModel.length;i++)if(!c.p.colModel[i].hidedlg){var e=c.p.colModel[i].name.replace(/\./g,"\\.");a("#col_"+e,"#"+h).attr("checked")?(a(c).jqGrid("showCol",c.p.colModel[i].name),a("#col_"+e,"#"+h).attr("defaultChecked",!0)):(a(c).jqGrid("hideCol",c.p.colModel[i].name),a("#col_"+e,"#"+h).attr("defaultChecked",""))}return b.ShrinkToFit===!0&&a(c).jqGrid("setGridWidth",c.grid.width-.001,!0),b.closeAfterSubmit&&a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+g,jqm:b.jqModal,onClose:b.onClose}),f&&b.afterSubmitForm(a("#"+h)),!1}),a("#eData","#"+h+"_2").click(function(c){return a.jgrid.hideModal("#"+j.themodal,{gb:"#gbox_"+g,jqm:b.jqModal,onClose:b.onClose}),!1}),a("#dData, #eData","#"+h+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),d&&b.beforeShowForm(a("#"+h)),a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+g,jqm:b.jqModal,jqM:!0,modal:b.modal}),e&&b.afterShowForm(a("#"+h))}}})}})}(jQuery);